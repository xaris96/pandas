# SPDX-FileCopyrightText: 2021 Filipe La√≠ns <lains@riseup.net>
# SPDX-FileCopyrightText: 2021 Quansight, LLC
# SPDX-FileCopyrightText: 2022 The meson-python developers
#
# SPDX-License-Identifier: MIT

from __future__ import annotations

import functools
import importlib.resources
import os
import pathlib
import sys
import typing

from collections.abc import (
    Collection,
    Iterable,
    Iterator,
    Mapping,
    Sequence,
)


from functools import cached_property


def read_binary(package: str, resource: str) -> bytes:
    return importlib.resources.files(package).joinpath(resource).read_bytes()


if typing.TYPE_CHECKING:
    from typing import Union

    from typing import ParamSpec

    Path = Union[str, os.PathLike]


# backport og pathlib.Path.is_relative_to
def is_relative_to(path: pathlib.Path, other: pathlib.Path | str) -> bool:
    try:
        path.relative_to(other)
    except ValueError:
        return False
    return True


__all__ = [
    'cached_property',
    'is_relative_to',
    'read_binary',
    'Collection',
    'Iterable',
    'Iterator',
    'Mapping',
    'Path',
    'ParamSpec',
    'Sequence',
]
